% FUNCTION NAME:
%   Vulnerability_model
%
% DESCRIPTION:
%   This is basically the Vulnerability model, outputting the monetized values of the
%   space objects in conjunction as the socio-economic impact of the conjunction event in case of collision.
%
% INPUT:
%   Primary_eos = (1 object)  Primary NASA satellite in conjunction [NASA_sat]
%   Secondary_object = (1 object) Secondary space object in conjunction with the NASA satellite [Space_object]
%   m1 = [1x1] Mass of primary NASA satellite [kg]
%   Rel_v = [1x1] Normal of relative velocity between the two objects in conjunction at TCA [m/s] !
%   m2 = [1x1] Mass of the secondary object [kg]
%
% OUTPUT:
%   value1 = [1x1] Monetized value of the primary NASA satellite
%   value2 = [1x1] Monetized value of the secondary object
%   value_CC = [1x1] Monetized value of the collision consequence
%   NumOfPiece = [1x1] Number of released debris pieces in case of collision
%
% ASSUMPTIONS AND LIMITATIONS:
%   The values need to be normalized before summation.
%
% REVISION HISTORY:
%   Dates in DD/MM/YYYY
%
%   11/1/2023 - Sina Es haghi
%       * Adding header
%   30/1/2023 - Sina Es haghi
%       * Adding the collision consequence calculation to the vulnerability model
%
function [value1,value2,value_CC,NumOfPieces]= Vulnerability_model(Primary_eos,Secondary_object,m1,Rel_v,m2)
global config;
if isempty(Primary_eos.value)
    Primary_eos=Valuing_NASA_EOS(Primary_eos);
end
value1=Primary_eos.value;
if isempty(Secondary_object.value)
    Secondary_object=Valuing_Secondary_obj(Secondary_object);
end
value2=Secondary_object.value;

[~,NumOfPieces] = CollisionConsequenceNumPieces(m1,Rel_v,m2);
value_CC=NumOfPieces/config.CC_normalizer;

